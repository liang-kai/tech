(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{222:function(v,_,e){"use strict";e.r(_);var t=e(0),o=Object(t.a)({},(function(){var v=this,_=v.$createElement,e=v._self._c||_;return e("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[e("h1",{attrs:{id:"从输入url到页面展示发生了什么"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#从输入url到页面展示发生了什么","aria-hidden":"true"}},[v._v("#")]),v._v(" 从输入URL到页面展示发生了什么")]),v._v(" "),e("h2",{attrs:{id:"浏览器的进程"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器的进程","aria-hidden":"true"}},[v._v("#")]),v._v(" 浏览器的进程")]),v._v(" "),e("p",[v._v("当前大多浏览器都是基于google开源的Chromium二次开发的，Chrome作为google的官方浏览器，特性和Chrominum基本一致。用Chrome来说下浏览器的进程。")]),v._v(" "),e("p",[v._v("先区分下进程和线程，进程是程序的运行实例，操作系统会分配一块独立的内存空间存放代码、数据来作为运行环境。进程间通信通过IPC机制。线程是进程开辟的计算单元，同一进程的不同线程可以共享运行时代码、数据。")]),v._v(" "),e("p",[v._v("Chrome基础共享进程有三个：")]),v._v(" "),e("ol",[e("li",[v._v("浏览器进程：负责用户交互、子进程管理、文件存储等")]),v._v(" "),e("li",[v._v("网络进程：提供网络通信功能")]),v._v(" "),e("li",[v._v("GPU进程：绘制图层")])]),v._v(" "),e("p",[v._v("还有两个不定数量的进程：")]),v._v(" "),e("ol",[e("li",[v._v("渲染进程： 每个同源页面会分配一个进程，解析html\\css\\js,排版引擎Blink和js引擎V8都是在这个进程里。")]),v._v(" "),e("li",[v._v("插件进程：之所以把插件独立出来，是为了避免插件问题引起的崩溃问题。")])]),v._v(" "),e("h2",{attrs:{id:"http-和-tcp介绍"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#http-和-tcp介绍","aria-hidden":"true"}},[v._v("#")]),v._v(" HTTP 和 TCP介绍")]),v._v(" "),e("p",[v._v("HTTP是应用层协议，TCP是传输层协议。")]),v._v(" "),e("p",[v._v("一个数据包加上IP和端口号，在两个机器的应用之间通过网络进行传送，这样的协议我们叫"),e("code",[v._v("UDP")]),v._v("。一个数据包最多14k,数据多那就需要进行拆分、发送、组装才能正确地通信，UDP满足不了，所有有个TCP。确保数据通过复杂的网络也能被正确的接收到，实现了丢包重传、以及数据序列机制。")]),v._v(" "),e("p",[v._v("TCP分三个阶段：")]),v._v(" "),e("ol",[e("li",[v._v("建立连接。")]),v._v(" "),e("li",[v._v("传输数据。")]),v._v(" "),e("li",[v._v("断开连接。\nTODO：待完善")])]),v._v(" "),e("p",[v._v("HTTP是TCP协议之上，也就是HTTP的内容会被TCP协议包裹了发出去。\n可分为请求行、请求头、请求体。")]),v._v(" "),e("p",[v._v("请求行又包括：")]),v._v(" "),e("ol",[e("li",[v._v("请求方法\n"),e("ul",[e("li",[e("code",[v._v("get")]),v._v(" 获取")]),v._v(" "),e("li",[e("code",[v._v("post")]),v._v(" 创建或修改")]),v._v(" "),e("li",[e("code",[v._v("delete")]),v._v(" 删除")]),v._v(" "),e("li",[e("code",[v._v("put")]),v._v(" 整体更新")]),v._v(" "),e("li",[e("code",[v._v("patch")]),v._v(" 部分更新")]),v._v(" "),e("li",[e("code",[v._v("head")]),v._v(" 只需要相应头")])])]),v._v(" "),e("li",[v._v("请求地址")]),v._v(" "),e("li",[v._v("请求协议")])]),v._v(" "),e("p",[v._v("请求头代表当前环境信息，也就是浏览器信息，部分包括：")]),v._v(" "),e("p",[e("code",[v._v("user-agent")]),v._v(": 浏览器信息（版本、厂商、内核等）\n"),e("code",[v._v("accept-lauguage")]),v._v(": 语言\n"),e("code",[v._v("accept")]),v._v(": 期望接收格式\n"),e("code",[v._v("accept-encoding")]),v._v(": 期望压缩格式\n"),e("code",[v._v("referer")]),v._v(": 当前请求页面来源\n"),e("code",[v._v("host")]),v._v(": 当前页面host\n"),e("code",[v._v("cookie")]),v._v(": 可以在客户端和服务端来回通信的、可持久存储的数据,一个重要的作用是用来标识用户\n"),e("code",[v._v("connection")]),v._v(": 是否持久链接，if yes,\b下次tcp链接建立就免了")]),v._v(" "),e("p",[v._v("响应头是服务端的应答，部分包括：")]),v._v(" "),e("p",[e("code",[v._v("content-encoding")]),v._v(": 编码格式\n"),e("code",[v._v("content-length")]),v._v(": 数据大小\n"),e("code",[v._v("content-type")]),v._v(": 数据格式\n"),e("code",[v._v("date")]),v._v(": 时间\n"),e("code",[v._v("last-modified")]),v._v(": 最后一次修改时间\n"),e("code",[v._v("location")]),v._v(": 状态为转移的时候标明转移地址\n"),e("code",[v._v("set-cookie")]),v._v(": 设置cookie")]),v._v(" "),e("h2",{attrs:{id:"开始请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#开始请求","aria-hidden":"true"}},[v._v("#")]),v._v(" 开始请求")]),v._v(" "),e("p",[v._v("从导航栏输入地址或内容（内容会被浏览器转为地址），到页面呈现是个漫长的说明过程，咱们慢慢来。")]),v._v(" "),e("p",[v._v("导航栏有了地址，譬如"),e("a",{attrs:{href:"http://baidu.com",target:"_blank",rel:"noopener noreferrer"}},[v._v("http://baidu.com"),e("OutboundLink")],1),v._v("，按下回车，这时浏览器就哗啦啦滴卖力工作了。")]),v._v(" "),e("ol",[e("li",[v._v("浏览器进程处理用户输入，交给网络进程发起http请求")]),v._v(" "),e("li",[v._v("网络进程：\n"),e("ol",[e("li",[v._v("DNS查询ip")]),v._v(" "),e("li",[v._v("准备TCP链接，如果同一域名的tcp超出限额（6），等待")]),v._v(" "),e("li",[v._v("发起http请求，接收相应头之后通知浏览器进程")])])]),v._v(" "),e("li",[v._v("浏览器进程准备渲染进程\n"),e("ol",[e("li",[v._v("网络进程把响应体数据给了渲染进程")]),v._v(" "),e("li",[v._v("渲染进程通知浏览器进程确认提交了文档，浏览器进程进行页面状态栏变更")])])]),v._v(" "),e("li",[v._v("渲染进程解析文档、请求子资源、绘制（1-5在主线程执行，之后是合成线程，重排、重绘都会影响主线程，而translate属性直接在合成线程操作，不影响主线程，显得流畅）\n"),e("ol",[e("li",[e("code",[v._v("构建DOM树")]),v._v("  html ==> DOM 树构建")]),v._v(" "),e("li",[e("code",[v._v("计算样式")]),v._v("   层叠样式表的计算，标准化处理")]),v._v(" "),e("li",[e("code",[v._v("构建布局树")]),v._v(" DOM 和 样式 构建成书，只展示需要的，display:none 的就算了")]),v._v(" "),e("li",[e("code",[v._v("分层")]),v._v("   和PS一样，需要分图层的，有层叠上下文属性的元素（display:fixed; opacity: .5; filter:blue(1px); z-index:2）\\ 有overflow内容溢出展示的 都会单独拉出一层，除此之外的元素在一个主图层。")]),v._v(" "),e("li",[e("code",[v._v("绘制列表")]),v._v("   图层分好了，接下来绘制，会生成绘制列表（描述文件）")]),v._v(" "),e("li",[e("code",[v._v("分块、栅格化")]),v._v("   视窗比页面一般小很多，保证视窗的优先加载对体验很重要。按照某个尺寸（256x256或512x512）把图层分块，生成位图（这里要交给GPU进程来做）")]),v._v(" "),e("li",[e("code",[v._v("展示")]),v._v("   渲染进程传给浏览器进程消息，展示在屏幕上")])])])])])}),[],!1,null,null,null);_.default=o.exports}}]);